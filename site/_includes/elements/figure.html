{%- capture basePath -%}
  /assets/img/{{ page.slug }}/{{ include.image }}
{%- endcapture -%}

<figure class="gh-figure">
  <a class="image-link" href="-original.jpeg" target="_blank">
    <picture>
      <source type="image/webp" srcset="{{ basePath }}-extralarge.webp, {{ basePath }}-extralarge@2x.webp 2x" media="(min-width: 1600px)">
      <source                   srcset="{{ basePath }}-extralarge.jpeg, {{ basePath }}-extralarge@2x.jpeg 2x" media="(min-width: 1600px)">
      <source type="image/webp" srcset="{{ basePath }}-large.webp, {{ basePath }}-large@2x.webp 2x"           media="(min-width: 800px)">
      <source                   srcset="{{ basePath }}-large.jpeg, {{ basePath }}-large@2x.jpeg 2x"           media="(min-width: 800px)">
      <source type="image/webp" srcset="{{ basePath }}-small.webp, {{ basePath }}-small@2x.webp 2x">
      <source                   srcset="{{ basePath }}-small.jpeg, {{ basePath }}-small@2x.jpeg 2x">
      <!-- fallback -->
      <img src="{{ basePath }}-small.jpeg" alt="{%- if include.alt -%}{{ include.alt }}{%- else %}{{ include.caption }}{%- endif -%}">
    </picture>
  </a>
  {%- if include.caption or include.credit -%}
  <figcaption>
    {% if include.caption %}<p>{{ include.caption }}</p>{% endif %}
    {% if include.credit %}<em>{{ include.credit }}</em>{% endif %}
  </figcaption>
  {%- endif -%}
</figure>
